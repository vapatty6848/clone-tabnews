

const { exec } = require("node:child_process")

function checkPostegres() {
exec("docker exec postgres-dev pg_isready --host localhost", handleReturn);

function handleReturn(erro, stdout) {
  if(stdout.search('accepting connections')=== -1) {
    process.stdout.write('.');
    checkPostegres();
    return;
  }
   console.log("\nðŸŸ¢ Postgres estÃ¡ pronto e aceitando conexÃµes!\n");
}
}

process.stdout.write("\n\nðŸ”´ Aguardando Postgres aceitar conexÃµes");

checkPostegres()
